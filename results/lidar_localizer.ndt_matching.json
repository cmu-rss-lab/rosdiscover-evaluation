{"package": "lidar_localizer", "node": "ndt_matching", "periodic_behavior": [], "reactive_behavior": [{"publisher": {"variable": "estimated_vel_mps_pub"}, "subscriber": {"callback": "points_callback"}}, {"publisher": {"variable": "estimated_vel_kmph_pub"}, "subscriber": {"callback": "points_callback"}}, {"publisher": {"variable": "predict_pose_imu_pub"}, "subscriber": {"callback": "points_callback"}}, {"publisher": {"variable": "predict_pose_odom_pub"}, "subscriber": {"callback": "points_callback"}}, {"publisher": {"variable": "predict_pose_imu_odom_pub"}, "subscriber": {"callback": "points_callback"}}, {"publisher": {"variable": "predict_pose_pub"}, "subscriber": {"callback": "points_callback"}}, {"publisher": {"variable": "ndt_pose_pub"}, "subscriber": {"callback": "points_callback"}}, {"publisher": {"variable": "localizer_pose_pub"}, "subscriber": {"callback": "points_callback"}}, {"publisher": {"variable": "tf_broadcaster"}, "subscriber": {"callback": "points_callback"}}, {"publisher": {"variable": "tf_broadcaster"}, "subscriber": {"callback": "points_callback"}}, {"publisher": {"variable": "time_ndt_matching_pub"}, "subscriber": {"callback": "points_callback"}}, {"publisher": {"variable": "estimate_twist_pub"}, "subscriber": {"callback": "points_callback"}}, {"publisher": {"variable": "estimated_vel_pub"}, "subscriber": {"callback": "points_callback"}}, {"publisher": {"variable": "ndt_stat_pub"}, "subscriber": {"callback": "points_callback"}}, {"publisher": {"variable": "ndt_reliability_pub"}, "subscriber": {"callback": "points_callback"}}], "potential_state_vars": [{"kind": "variable-reference", "qualified_name": "init_pos_set", "type": "integer", "initial-value": {"kind": "int-literal", "literal": 0}}, {"kind": "variable-reference", "qualified_name": "map_loaded", "type": "integer", "initial-value": {"kind": "int-literal", "literal": 0}}, {"kind": "member-var-ref", "qualified_name": "pose::y", "type": "float", "initial-value": {"kind": "float-literal", "literal": 0.0}, "base": {"kind": "variable-reference", "qualified_name": "initial_pose", "type": "unsupported", "initial-value": {"kind": "unknown"}}}, {"kind": "member-var-ref", "qualified_name": "pose::yaw", "type": "float", "initial-value": {"kind": "float-literal", "literal": 0.0}, "base": {"kind": "variable-reference", "qualified_name": "initial_pose", "type": "unsupported", "initial-value": {"kind": "unknown"}}}, {"kind": "member-var-ref", "qualified_name": "pose::x", "type": "float", "initial-value": {"kind": "float-literal", "literal": 0.0}, "base": {"kind": "variable-reference", "qualified_name": "initial_pose", "type": "unsupported", "initial-value": {"kind": "unknown"}}}, {"kind": "member-var-ref", "qualified_name": "pose::pitch", "type": "float", "initial-value": {"kind": "float-literal", "literal": 0.0}, "base": {"kind": "variable-reference", "qualified_name": "initial_pose", "type": "unsupported", "initial-value": {"kind": "unknown"}}}, {"kind": "member-var-ref", "qualified_name": "pose::roll", "type": "float", "initial-value": {"kind": "float-literal", "literal": 0.0}, "base": {"kind": "variable-reference", "qualified_name": "initial_pose", "type": "unsupported", "initial-value": {"kind": "unknown"}}}, {"kind": "member-var-ref", "qualified_name": "pose::z", "type": "float", "initial-value": {"kind": "float-literal", "literal": 0.0}, "base": {"kind": "variable-reference", "qualified_name": "initial_pose", "type": "unsupported", "initial-value": {"kind": "unknown"}}}, {"kind": "variable-reference", "qualified_name": "_use_gnss", "type": "integer", "initial-value": {"kind": "int-literal", "literal": 1}}, {"kind": "variable-reference", "qualified_name": "fitness_score", "type": "float", "initial-value": {"kind": "float-literal", "literal": 0.0}}, {"kind": "variable-reference", "qualified_name": "use_predict_pose", "type": "integer", "initial-value": {"kind": "int-literal", "literal": 0}}, {"kind": "variable-reference", "qualified_name": "_method_type", "type": "unsupported", "initial-value": {"kind": "int-literal", "literal": "0"}}], "transitions": [{"type": "message", "condition": "_use_gnss == 1 && !_use_gnss == 1 && init_pos_set == 0 || !_use_gnss == 1 && _use_gnss == 1 && init_pos_set == 0 || fitness_score >= 500.0 || _use_gnss == 1 && _use_gnss == 1 && init_pos_set == 0", "callback": "gnss_callback", "state_changes": [{"variable": "pose::y", "new_value": "current_gnss_pose.pose::y"}, {"variable": "pose::yaw", "new_value": "previous_gnss_pose.pose::yaw"}, {"variable": "pose::x", "new_value": "previous_gnss_pose.pose::x"}, {"variable": "pose::pitch", "new_value": "current_gnss_pose.pose::pitch"}, {"variable": "pose::yaw", "new_value": "current_gnss_pose.pose::yaw"}, {"variable": "pose::z", "new_value": "previous_gnss_pose.pose::z"}, {"variable": "pose::z", "new_value": "current_gnss_pose.pose::z"}, {"variable": "pose::x", "new_value": "current_gnss_pose.pose::x"}, {"variable": "pose::pitch", "new_value": "previous_gnss_pose.pose::pitch"}, {"variable": "pose::roll", "new_value": "previous_gnss_pose.pose::roll"}, {"variable": "pose::y", "new_value": "previous_gnss_pose.pose::y"}, {"variable": "pose::roll", "new_value": "current_gnss_pose.pose::roll"}, {"variable": "init_pos_set", "new_value": "1"}], "outputs": []}, {"type": "message", "condition": "True", "callback": "gnss_callback", "state_changes": [{"variable": "pose::y", "new_value": "current_gnss_pose.pose::y"}, {"variable": "pose::pitch", "new_value": "current_gnss_pose.pose::pitch"}, {"variable": "pose::yaw", "new_value": "current_gnss_pose.pose::yaw"}, {"variable": "pose::x", "new_value": "unknown.geometry_msgs::PoseStamped_<std::allocator<void>>::pose.geometry_msgs::Pose_<std::allocator<void>>::position.geometry_msgs::Point_<std::allocator<void>>::x"}, {"variable": "pose::z", "new_value": "current_gnss_pose.pose::z"}, {"variable": "pose::z", "new_value": "unknown.geometry_msgs::PoseStamped_<std::allocator<void>>::pose.geometry_msgs::Pose_<std::allocator<void>>::position.geometry_msgs::Point_<std::allocator<void>>::z"}, {"variable": "pose::x", "new_value": "current_gnss_pose.pose::x"}, {"variable": "pose::y", "new_value": "unknown.geometry_msgs::PoseStamped_<std::allocator<void>>::pose.geometry_msgs::Pose_<std::allocator<void>>::position.geometry_msgs::Point_<std::allocator<void>>::y"}, {"variable": "pose::roll", "new_value": "current_gnss_pose.pose::roll"}], "outputs": []}, {"type": "message", "condition": "True", "callback": "initialpose_callback", "state_changes": [{"variable": "pose::yaw", "new_value": "current_pose.pose::yaw"}, {"variable": "pose::roll", "new_value": "current_pose.pose::roll"}, {"variable": "pose::pitch", "new_value": "current_pose.pose::pitch"}, {"variable": "pose::x", "new_value": "current_pose.pose::x"}, {"variable": "init_pos_set", "new_value": "1"}, {"variable": "pose::z", "new_value": "current_pose.pose::z"}, {"variable": "pose::y", "new_value": "current_pose.pose::y"}], "outputs": []}, {"type": "message", "condition": "_get_height == True && _get_height == True && map_loaded == 1", "callback": "initialpose_callback", "state_changes": [{"variable": "pose::z", "new_value": "nearest_z"}], "outputs": []}, {"type": "message", "condition": "_use_gnss == 0 && _use_gnss == 0 && init_pos_set == 0", "callback": "param_callback", "state_changes": [{"variable": "pose::yaw", "new_value": "initial_pose.pose::yaw"}, {"variable": "pose::z", "new_value": "0"}, {"variable": "pose::y", "new_value": "unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::y"}, {"variable": "pose::roll", "new_value": "unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::roll"}, {"variable": "pose::pitch", "new_value": "initial_pose.pose::pitch"}, {"variable": "pose::y", "new_value": "initial_pose.pose::y"}, {"variable": "pose::z", "new_value": "initial_pose.pose::z"}, {"variable": "pose::pitch", "new_value": "unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::pitch"}, {"variable": "pose::roll", "new_value": "initial_pose.pose::roll"}, {"variable": "pose::x", "new_value": "0"}, {"variable": "pose::x", "new_value": "initial_pose.pose::x"}, {"variable": "pose::x", "new_value": "unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::x"}, {"variable": "pose::y", "new_value": "0"}, {"variable": "pose::pitch", "new_value": "0"}, {"variable": "init_pos_set", "new_value": "1"}, {"variable": "pose::yaw", "new_value": "0"}, {"variable": "pose::z", "new_value": "unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::z"}, {"variable": "pose::roll", "new_value": "0"}, {"variable": "pose::yaw", "new_value": "unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::yaw"}], "outputs": []}, {"type": "message", "condition": "!_use_gnss != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::init_pos_gnss && _use_gnss == 0 && !initial_pose.pose::x != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::x && !initial_pose.pose::x != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::x || initial_pose.pose::y != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::y && !initial_pose.pose::x != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::x || initial_pose.pose::y != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::y || initial_pose.pose::z != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::z && !initial_pose.pose::x != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::x || initial_pose.pose::y != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::y || initial_pose.pose::z != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::z || initial_pose.pose::roll != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::roll && !initial_pose.pose::x != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::x || initial_pose.pose::y != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::y || initial_pose.pose::z != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::z || initial_pose.pose::roll != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::roll || initial_pose.pose::pitch != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::pitch && _use_gnss == 0 && initial_pose.pose::x != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::x || initial_pose.pose::y != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::y || initial_pose.pose::z != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::z || initial_pose.pose::roll != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::roll || initial_pose.pose::pitch != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::pitch || initial_pose.pose::yaw != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::yaw || !_use_gnss != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::init_pos_gnss && _use_gnss == 0 && !initial_pose.pose::x != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::x && !initial_pose.pose::x != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::x || initial_pose.pose::y != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::y && !initial_pose.pose::x != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::x || initial_pose.pose::y != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::y || initial_pose.pose::z != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::z && !initial_pose.pose::x != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::x || initial_pose.pose::y != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::y || initial_pose.pose::z != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::z || initial_pose.pose::roll != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::roll && initial_pose.pose::x != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::x || initial_pose.pose::y != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::y || initial_pose.pose::z != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::z || initial_pose.pose::roll != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::roll || initial_pose.pose::pitch != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::pitch || !_use_gnss != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::init_pos_gnss && _use_gnss == 0 && !initial_pose.pose::x != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::x && !initial_pose.pose::x != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::x || initial_pose.pose::y != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::y && !initial_pose.pose::x != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::x || initial_pose.pose::y != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::y || initial_pose.pose::z != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::z && initial_pose.pose::x != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::x || initial_pose.pose::y != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::y || initial_pose.pose::z != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::z || initial_pose.pose::roll != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::roll || !_use_gnss != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::init_pos_gnss && _use_gnss == 0 && !initial_pose.pose::x != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::x && !initial_pose.pose::x != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::x || initial_pose.pose::y != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::y && initial_pose.pose::x != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::x || initial_pose.pose::y != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::y || initial_pose.pose::z != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::z || !_use_gnss != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::init_pos_gnss && _use_gnss == 0 && !initial_pose.pose::x != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::x && initial_pose.pose::x != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::x || initial_pose.pose::y != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::y || !_use_gnss != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::init_pos_gnss && _use_gnss == 0 && initial_pose.pose::x != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::x", "callback": "param_callback", "state_changes": [{"variable": "init_pos_set", "new_value": "0"}], "outputs": []}, {"type": "message", "condition": "_use_gnss != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::init_pos_gnss", "callback": "param_callback", "state_changes": [{"variable": "init_pos_set", "new_value": "0"}], "outputs": []}, {"type": "message", "condition": "_use_gnss == 0 && _use_gnss == 0 && init_pos_set == 0 && _use_local_transform == True", "callback": "param_callback", "state_changes": [{"variable": "pose::x", "new_value": "unknown"}, {"variable": "pose::z", "new_value": "unknown"}, {"variable": "pose::y", "new_value": "unknown"}], "outputs": []}, {"type": "message", "condition": "True", "callback": "param_callback", "state_changes": [{"variable": "_use_gnss", "new_value": "unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::init_pos_gnss"}], "outputs": []}, {"type": "message", "condition": "map_loaded == 1 && map_loaded == 1 && init_pos_set == 1 && !use_predict_pose == 0", "callback": "points_callback", "state_changes": [{"variable": "pose::y", "new_value": "predict_pose_for_ndt.pose::y"}, {"variable": "pose::yaw", "new_value": "predict_pose_for_ndt.pose::yaw"}, {"variable": "pose::pitch", "new_value": "predict_pose_for_ndt.pose::pitch"}, {"variable": "pose::x", "new_value": "predict_pose_for_ndt.pose::x"}, {"variable": "pose::roll", "new_value": "predict_pose_for_ndt.pose::roll"}, {"variable": "pose::z", "new_value": "predict_pose_for_ndt.pose::z"}], "outputs": []}, {"type": "message", "condition": "map_loaded == 1 && map_loaded == 1 && init_pos_set == 1", "callback": "points_callback", "state_changes": [{"variable": "pose::x", "new_value": "unknown"}, {"variable": "pose::z", "new_value": "unknown"}, {"variable": "pose::y", "new_value": "previous_pose.pose::y + offset_y"}, {"variable": "pose::yaw", "new_value": "previous_pose.pose::yaw + offset_yaw"}, {"variable": "pose::yaw", "new_value": "current_pose.pose::yaw"}, {"variable": "pose::roll", "new_value": "previous_pose.pose::roll"}, {"variable": "pose::x", "new_value": "previous_pose.pose::x + offset_x"}, {"variable": "pose::roll", "new_value": "current_pose.pose::roll"}, {"variable": "pose::z", "new_value": "previous_pose.pose::z + offset_z"}, {"variable": "use_predict_pose", "new_value": "0"}, {"variable": "pose::x", "new_value": "current_pose.pose::x"}, {"variable": "pose::pitch", "new_value": "previous_pose.pose::pitch"}, {"variable": "pose::pitch", "new_value": "current_pose.pose::pitch"}, {"variable": "pose::z", "new_value": "current_pose.pose::z"}, {"variable": "pose::y", "new_value": "unknown"}, {"variable": "pose::y", "new_value": "current_pose.pose::y"}], "outputs": [{"publisher": {"variable": "estimate_twist_pub"}}, {"publisher": {"variable": "ndt_pose_pub"}}, {"publisher": {"variable": "estimated_vel_pub"}}, {"publisher": {"variable": "estimated_vel_mps_pub"}}, {"publisher": {"variable": "ndt_reliability_pub"}}, {"publisher": {"variable": "estimated_vel_kmph_pub"}}, {"publisher": {"variable": "localizer_pose_pub"}}, {"publisher": {"variable": "ndt_stat_pub"}}, {"publisher": {"variable": "predict_pose_pub"}}, {"publisher": {"variable": "predict_pose_odom_pub"}}, {"publisher": {"variable": "time_ndt_matching_pub"}}, {"publisher": {"variable": "predict_pose_imu_pub"}}, {"publisher": {"variable": "predict_pose_imu_odom_pub"}}]}, {"type": "message", "condition": "map_loaded == 1 && map_loaded == 1 && init_pos_set == 1 && use_predict_pose == 0", "callback": "points_callback", "state_changes": [{"variable": "pose::roll", "new_value": "ndt_pose.pose::roll"}, {"variable": "pose::z", "new_value": "ndt_pose.pose::z"}, {"variable": "pose::yaw", "new_value": "ndt_pose.pose::yaw"}, {"variable": "pose::pitch", "new_value": "ndt_pose.pose::pitch"}, {"variable": "pose::y", "new_value": "ndt_pose.pose::y"}, {"variable": "pose::x", "new_value": "ndt_pose.pose::x"}], "outputs": []}, {"type": "message", "condition": "map_loaded == 1 && map_loaded == 1 && init_pos_set == 1 && !_method_type == MethodType::PCL_GENERIC := 0 && !_method_type == MethodType::PCL_ANH := 1 && _method_type == MethodType::PCL_ANH_GPU := 2", "callback": "points_callback", "state_changes": [{"variable": "fitness_score", "new_value": "unknown"}], "outputs": []}, {"type": "message", "condition": "map_loaded == 1 && map_loaded == 1 && init_pos_set == 1 && _method_type == MethodType::PCL_GENERIC := 0", "callback": "points_callback", "state_changes": [{"variable": "fitness_score", "new_value": "unknown"}], "outputs": []}, {"type": "message", "condition": "map_loaded == 1 && map_loaded == 1 && init_pos_set == 1 && !_method_type == MethodType::PCL_GENERIC := 0 && !_method_type == MethodType::PCL_ANH := 1 && !_method_type == MethodType::PCL_ANH_GPU := 2 && _method_type == MethodType::PCL_OPENMP := 3", "callback": "points_callback", "state_changes": [{"variable": "fitness_score", "new_value": "unknown"}], "outputs": []}, {"type": "message", "condition": "map_loaded == 1 && map_loaded == 1 && init_pos_set == 1 && !_method_type == MethodType::PCL_GENERIC := 0 && _method_type == MethodType::PCL_ANH := 1", "callback": "points_callback", "state_changes": [{"variable": "fitness_score", "new_value": "unknown"}], "outputs": []}, {"type": "message", "condition": "map_loaded == 1 && map_loaded == 1 && init_pos_set == 1 && predict_pose_error <= 0.5", "callback": "points_callback", "state_changes": [{"variable": "use_predict_pose", "new_value": "0"}], "outputs": []}, {"type": "message", "condition": "map_loaded == 1 && map_loaded == 1 && init_pos_set == 1 && !predict_pose_error <= 0.5", "callback": "points_callback", "state_changes": [{"variable": "use_predict_pose", "new_value": "1"}], "outputs": []}, {"type": "message", "condition": "map_loaded == 1 && map_loaded == 1 && init_pos_set == 1 && _use_local_transform == True", "callback": "points_callback", "state_changes": [], "outputs": [{"publisher": {"variable": "tf_broadcaster"}}]}, {"type": "message", "condition": "map_loaded == 1 && map_loaded == 1 && init_pos_set == 1 && !_use_local_transform == True", "callback": "points_callback", "state_changes": [], "outputs": [{"publisher": {"variable": "tf_broadcaster"}}]}], "unclassified_publish": []}