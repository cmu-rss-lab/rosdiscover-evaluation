{"package": "lidar_localizer", "node": "ndt_matching", "periodic_behavior": [], "reactive_behavior": [{"publisher": {"variable": "estimated_vel_mps_pub"}, "subscriber": {"callback": "points_callback"}}, {"publisher": {"variable": "estimated_vel_kmph_pub"}, "subscriber": {"callback": "points_callback"}}, {"publisher": {"variable": "predict_pose_imu_pub"}, "subscriber": {"callback": "points_callback"}}, {"publisher": {"variable": "predict_pose_odom_pub"}, "subscriber": {"callback": "points_callback"}}, {"publisher": {"variable": "predict_pose_imu_odom_pub"}, "subscriber": {"callback": "points_callback"}}, {"publisher": {"variable": "predict_pose_pub"}, "subscriber": {"callback": "points_callback"}}, {"publisher": {"variable": "ndt_pose_pub"}, "subscriber": {"callback": "points_callback"}}, {"publisher": {"variable": "localizer_pose_pub"}, "subscriber": {"callback": "points_callback"}}, {"publisher": {"variable": "tf_broadcaster"}, "subscriber": {"callback": "points_callback"}}, {"publisher": {"variable": "tf_broadcaster"}, "subscriber": {"callback": "points_callback"}}, {"publisher": {"variable": "time_ndt_matching_pub"}, "subscriber": {"callback": "points_callback"}}, {"publisher": {"variable": "estimate_twist_pub"}, "subscriber": {"callback": "points_callback"}}, {"publisher": {"variable": "estimated_vel_pub"}, "subscriber": {"callback": "points_callback"}}, {"publisher": {"variable": "ndt_stat_pub"}, "subscriber": {"callback": "points_callback"}}, {"publisher": {"variable": "ndt_reliability_pub"}, "subscriber": {"callback": "points_callback"}}], "potential_state_vars": [{"kind": "variable-reference", "qualified_name": "init_pos_set", "type": "integer", "initial-value": {"kind": "int-literal", "literal": 0}}, {"kind": "variable-reference", "qualified_name": "map_loaded", "type": "integer", "initial-value": {"kind": "int-literal", "literal": 0}}, {"kind": "variable-reference", "qualified_name": "fitness_score", "type": "float", "initial-value": {"kind": "float-literal", "literal": 0.0}}, {"kind": "member-var-ref", "qualified_name": "pose::y", "type": "float", "initial-value": {"kind": "float-literal", "literal": 0.0}, "base": {"kind": "variable-reference", "qualified_name": "initial_pose", "type": "unsupported", "initial-value": {"kind": "unknown"}}}, {"kind": "variable-reference", "qualified_name": "_use_gnss", "type": "integer", "initial-value": {"kind": "int-literal", "literal": 1}}, {"kind": "member-var-ref", "qualified_name": "pose::yaw", "type": "float", "initial-value": {"kind": "float-literal", "literal": 0.0}, "base": {"kind": "variable-reference", "qualified_name": "initial_pose", "type": "unsupported", "initial-value": {"kind": "unknown"}}}, {"kind": "member-var-ref", "qualified_name": "pose::roll", "type": "float", "initial-value": {"kind": "float-literal", "literal": 0.0}, "base": {"kind": "variable-reference", "qualified_name": "initial_pose", "type": "unsupported", "initial-value": {"kind": "unknown"}}}, {"kind": "member-var-ref", "qualified_name": "pose::pitch", "type": "float", "initial-value": {"kind": "float-literal", "literal": 0.0}, "base": {"kind": "variable-reference", "qualified_name": "initial_pose", "type": "unsupported", "initial-value": {"kind": "unknown"}}}, {"kind": "member-var-ref", "qualified_name": "pose::z", "type": "float", "initial-value": {"kind": "float-literal", "literal": 0.0}, "base": {"kind": "variable-reference", "qualified_name": "initial_pose", "type": "unsupported", "initial-value": {"kind": "unknown"}}}, {"kind": "member-var-ref", "qualified_name": "pose::x", "type": "float", "initial-value": {"kind": "float-literal", "literal": 0.0}, "base": {"kind": "variable-reference", "qualified_name": "initial_pose", "type": "unsupported", "initial-value": {"kind": "unknown"}}}, {"kind": "variable-reference", "qualified_name": "_method_type", "type": "unsupported", "initial-value": {"kind": "int-literal", "literal": "0"}}], "transitions": [{"type": "message", "condition": "(points_map_num != unknown.sensor_msgs::PointCloud2_<std::allocator<void>>::width)", "callback": "map_callback", "topic": "points_map", "state_changes": [{"variable": "map_loaded", "new_value": "1"}], "outputs": []}, {"type": "message", "condition": "(((_use_gnss == 0) && (_use_gnss == 0)) || ((_use_gnss == 0) || ((_use_gnss == 0) || ((_use_gnss == 0) || ((_use_gnss == 0) || (_use_gnss == 0))))))", "callback": "param_callback", "topic": "config/ndt", "state_changes": [{"variable": "init_pos_set", "new_value": "0"}], "outputs": []}, {"type": "message", "condition": "(_use_gnss != unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::init_pos_gnss)", "callback": "param_callback", "topic": "config/ndt", "state_changes": [{"variable": "init_pos_set", "new_value": "0"}], "outputs": []}, {"type": "message", "condition": "((_use_gnss == 0) && ((_use_gnss == 0) && (init_pos_set == 0)))", "callback": "param_callback", "topic": "config/ndt", "state_changes": [{"variable": "pose::pitch", "new_value": "unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::pitch"}, {"variable": "pose::z", "new_value": "initial_pose.pose::z"}, {"variable": "pose::x", "new_value": "unknown"}, {"variable": "pose::roll", "new_value": "unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::roll"}, {"variable": "pose::z", "new_value": "unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::z"}, {"variable": "pose::y", "new_value": "unknown"}, {"variable": "pose::pitch", "new_value": "initial_pose.pose::pitch"}, {"variable": "pose::z", "new_value": "0"}, {"variable": "pose::z", "new_value": "initial_pose.pose::z"}, {"variable": "pose::pitch", "new_value": "initial_pose.pose::pitch"}, {"variable": "pose::x", "new_value": "initial_pose.pose::x"}, {"variable": "pose::yaw", "new_value": "0"}, {"variable": "pose::roll", "new_value": "initial_pose.pose::roll"}, {"variable": "pose::yaw", "new_value": "initial_pose.pose::yaw"}, {"variable": "pose::y", "new_value": "initial_pose.pose::y"}, {"variable": "pose::x", "new_value": "initial_pose.pose::x"}, {"variable": "pose::yaw", "new_value": "initial_pose.pose::yaw"}, {"variable": "pose::y", "new_value": "initial_pose.pose::y"}, {"variable": "pose::y", "new_value": "unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::y"}, {"variable": "pose::roll", "new_value": "initial_pose.pose::roll"}, {"variable": "pose::x", "new_value": "0"}, {"variable": "pose::yaw", "new_value": "unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::yaw"}, {"variable": "pose::y", "new_value": "0"}, {"variable": "pose::x", "new_value": "unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::x"}, {"variable": "pose::yaw", "new_value": "initial_pose.pose::yaw"}, {"variable": "pose::y", "new_value": "initial_pose.pose::y"}, {"variable": "pose::pitch", "new_value": "0"}, {"variable": "pose::x", "new_value": "initial_pose.pose::x"}, {"variable": "pose::roll", "new_value": "0"}, {"variable": "pose::z", "new_value": "unknown"}, {"variable": "pose::roll", "new_value": "initial_pose.pose::roll"}, {"variable": "pose::z", "new_value": "initial_pose.pose::z"}, {"variable": "init_pos_set", "new_value": "1"}, {"variable": "pose::pitch", "new_value": "initial_pose.pose::pitch"}], "outputs": []}, {"type": "message", "condition": "True", "callback": "param_callback", "topic": "config/ndt", "state_changes": [{"variable": "_use_gnss", "new_value": "unknown.autoware_config_msgs::ConfigNDT_<std::allocator<void>>::init_pos_gnss"}], "outputs": []}, {"type": "message", "condition": "((map_loaded == 1) && ((map_loaded == 1) && (init_pos_set == 1)))", "callback": "points_callback", "topic": "filtered_points", "state_changes": [{"variable": "pose::x", "new_value": "ndt_pose.pose::x"}, {"variable": "pose::yaw", "new_value": "current_pose.pose::yaw"}, {"variable": "pose::roll", "new_value": "current_pose.pose::roll"}, {"variable": "pose::y", "new_value": "predict_pose_for_ndt.pose::y"}, {"variable": "pose::x", "new_value": "current_pose.pose::x"}, {"variable": "pose::roll", "new_value": "current_pose.pose::roll"}, {"variable": "pose::pitch", "new_value": "current_pose.pose::pitch"}, {"variable": "pose::yaw", "new_value": "current_pose.pose::yaw"}, {"variable": "pose::y", "new_value": "current_pose.pose::y"}, {"variable": "pose::yaw", "new_value": "predict_pose_for_ndt.pose::yaw"}, {"variable": "pose::x", "new_value": "unknown"}, {"variable": "pose::z", "new_value": "current_pose.pose::z"}, {"variable": "pose::z", "new_value": "ndt_pose.pose::z"}, {"variable": "pose::z", "new_value": "predict_pose_for_ndt.pose::z"}, {"variable": "pose::x", "new_value": "current_pose.pose::x"}, {"variable": "pose::yaw", "new_value": "current_pose.pose::yaw"}, {"variable": "pose::y", "new_value": "unknown"}, {"variable": "pose::yaw", "new_value": "current_pose.pose::yaw"}, {"variable": "pose::pitch", "new_value": "current_pose.pose::pitch"}, {"variable": "pose::z", "new_value": "unknown"}, {"variable": "pose::x", "new_value": "current_pose.pose::x"}, {"variable": "fitness_score", "new_value": "unknown"}, {"variable": "pose::pitch", "new_value": "ndt_pose.pose::pitch"}, {"variable": "pose::pitch", "new_value": "predict_pose_for_ndt.pose::pitch"}, {"variable": "pose::z", "new_value": "unknown"}, {"variable": "pose::z", "new_value": "(previous_pose.pose::z + offset_z)"}, {"variable": "pose::roll", "new_value": "previous_pose.pose::roll"}, {"variable": "fitness_score", "new_value": "unknown"}, {"variable": "pose::x", "new_value": "current_pose.pose::x"}, {"variable": "pose::x", "new_value": "(previous_pose.pose::x + offset_x)"}, {"variable": "pose::y", "new_value": "unknown"}, {"variable": "pose::y", "new_value": "current_pose.pose::y"}, {"variable": "pose::z", "new_value": "current_pose.pose::z"}, {"variable": "pose::x", "new_value": "unknown"}, {"variable": "pose::yaw", "new_value": "ndt_pose.pose::yaw"}, {"variable": "pose::pitch", "new_value": "current_pose.pose::pitch"}, {"variable": "fitness_score", "new_value": "unknown"}, {"variable": "pose::z", "new_value": "current_pose.pose::z"}, {"variable": "pose::y", "new_value": "current_pose.pose::y"}, {"variable": "pose::roll", "new_value": "ndt_pose.pose::roll"}, {"variable": "pose::z", "new_value": "current_pose.pose::z"}, {"variable": "pose::roll", "new_value": "predict_pose_for_ndt.pose::roll"}, {"variable": "fitness_score", "new_value": "unknown"}, {"variable": "pose::y", "new_value": "current_pose.pose::y"}, {"variable": "pose::x", "new_value": "predict_pose_for_ndt.pose::x"}, {"variable": "pose::pitch", "new_value": "current_pose.pose::pitch"}, {"variable": "pose::roll", "new_value": "current_pose.pose::roll"}, {"variable": "pose::y", "new_value": "ndt_pose.pose::y"}, {"variable": "pose::y", "new_value": "(previous_pose.pose::y + offset_y)"}, {"variable": "pose::yaw", "new_value": "(previous_pose.pose::yaw + offset_yaw)"}, {"variable": "pose::roll", "new_value": "current_pose.pose::roll"}, {"variable": "pose::pitch", "new_value": "previous_pose.pose::pitch"}], "outputs": [{"publisher": {"variable": "estimated_vel_kmph_pub", "topic": "/estimated_vel_kmph"}}, {"publisher": {"variable": "tf_broadcaster", "topic": "unknown_topic"}}, {"publisher": {"variable": "time_ndt_matching_pub", "topic": "/time_ndt_matching"}}, {"publisher": {"variable": "estimate_twist_pub", "topic": "/estimate_twist"}}, {"publisher": {"variable": "predict_pose_imu_pub", "topic": "/predict_pose_imu"}}, {"publisher": {"variable": "estimated_vel_mps_pub", "topic": "/estimated_vel_mps"}}, {"publisher": {"variable": "predict_pose_pub", "topic": "/predict_pose"}}, {"publisher": {"variable": "ndt_reliability_pub", "topic": "/ndt_reliability"}}, {"publisher": {"variable": "localizer_pose_pub", "topic": "/localizer_pose"}}, {"publisher": {"variable": "predict_pose_odom_pub", "topic": "/predict_pose_odom"}}, {"publisher": {"variable": "ndt_pose_pub", "topic": "/ndt_pose"}}, {"publisher": {"variable": "predict_pose_imu_odom_pub", "topic": "/predict_pose_imu_odom"}}, {"publisher": {"variable": "estimated_vel_pub", "topic": "/estimated_vel"}}, {"publisher": {"variable": "ndt_stat_pub", "topic": "/ndt_stat"}}, {"publisher": {"variable": "tf_broadcaster", "topic": "unknown_topic"}}]}, {"type": "message", "condition": "(((((_use_gnss == 1) && (!((_use_gnss == 1) && (init_pos_set == 0)))) || (!(_use_gnss == 1))) && (((_use_gnss == 1) && (init_pos_set == 0)) || (fitness_score >= 500.0))) || ((_use_gnss == 1) && ((_use_gnss == 1) && (init_pos_set == 0))))", "callback": "gnss_callback", "topic": "gnss_pose", "state_changes": [{"variable": "pose::roll", "new_value": "previous_gnss_pose.pose::roll"}, {"variable": "init_pos_set", "new_value": "1"}, {"variable": "pose::yaw", "new_value": "current_gnss_pose.pose::yaw"}, {"variable": "pose::x", "new_value": "current_gnss_pose.pose::x"}, {"variable": "pose::roll", "new_value": "current_gnss_pose.pose::roll"}, {"variable": "pose::yaw", "new_value": "previous_gnss_pose.pose::yaw"}, {"variable": "pose::z", "new_value": "current_gnss_pose.pose::z"}, {"variable": "pose::z", "new_value": "previous_gnss_pose.pose::z"}, {"variable": "pose::y", "new_value": "previous_gnss_pose.pose::y"}, {"variable": "pose::pitch", "new_value": "current_gnss_pose.pose::pitch"}, {"variable": "pose::pitch", "new_value": "previous_gnss_pose.pose::pitch"}, {"variable": "pose::x", "new_value": "previous_gnss_pose.pose::x"}, {"variable": "pose::y", "new_value": "current_gnss_pose.pose::y"}], "outputs": []}, {"type": "message", "condition": "True", "callback": "gnss_callback", "topic": "gnss_pose", "state_changes": [{"variable": "pose::z", "new_value": "unknown.geometry_msgs::PoseStamped_<std::allocator<void>>::pose.geometry_msgs::Pose_<std::allocator<void>>::position.geometry_msgs::Point_<std::allocator<void>>::z"}, {"variable": "pose::y", "new_value": "current_gnss_pose.pose::y"}, {"variable": "pose::x", "new_value": "current_gnss_pose.pose::x"}, {"variable": "pose::pitch", "new_value": "current_gnss_pose.pose::pitch"}, {"variable": "pose::roll", "new_value": "current_gnss_pose.pose::roll"}, {"variable": "pose::x", "new_value": "unknown.geometry_msgs::PoseStamped_<std::allocator<void>>::pose.geometry_msgs::Pose_<std::allocator<void>>::position.geometry_msgs::Point_<std::allocator<void>>::x"}, {"variable": "pose::z", "new_value": "current_gnss_pose.pose::z"}, {"variable": "pose::y", "new_value": "unknown.geometry_msgs::PoseStamped_<std::allocator<void>>::pose.geometry_msgs::Pose_<std::allocator<void>>::position.geometry_msgs::Point_<std::allocator<void>>::y"}, {"variable": "pose::yaw", "new_value": "current_gnss_pose.pose::yaw"}], "outputs": []}, {"type": "message", "condition": "True", "callback": "initialpose_callback", "topic": "initialpose", "state_changes": [{"variable": "pose::pitch", "new_value": "current_pose.pose::pitch"}, {"variable": "pose::x", "new_value": "(unknown.geometry_msgs::PoseWithCovarianceStamped_<std::allocator<void>>::pose.geometry_msgs::PoseWithCovariance_<std::allocator<void>>::pose.geometry_msgs::Pose_<std::allocator<void>>::position.geometry_msgs::Point_<std::allocator<void>>::x + unknown)"}, {"variable": "pose::x", "new_value": "current_pose.pose::x"}, {"variable": "pose::y", "new_value": "current_pose.pose::y"}, {"variable": "pose::z", "new_value": "current_pose.pose::z"}, {"variable": "pose::yaw", "new_value": "current_pose.pose::yaw"}, {"variable": "pose::y", "new_value": "(unknown.geometry_msgs::PoseWithCovarianceStamped_<std::allocator<void>>::pose.geometry_msgs::PoseWithCovariance_<std::allocator<void>>::pose.geometry_msgs::Pose_<std::allocator<void>>::position.geometry_msgs::Point_<std::allocator<void>>::y + unknown)"}, {"variable": "pose::z", "new_value": "(unknown.geometry_msgs::PoseWithCovarianceStamped_<std::allocator<void>>::pose.geometry_msgs::PoseWithCovariance_<std::allocator<void>>::pose.geometry_msgs::Pose_<std::allocator<void>>::position.geometry_msgs::Point_<std::allocator<void>>::z + unknown)"}, {"variable": "pose::roll", "new_value": "current_pose.pose::roll"}, {"variable": "init_pos_set", "new_value": "1"}], "outputs": []}, {"type": "message", "condition": "(_use_local_transform == True)", "callback": "initialpose_callback", "topic": "initialpose", "state_changes": [{"variable": "pose::x", "new_value": "unknown.geometry_msgs::PoseWithCovarianceStamped_<std::allocator<void>>::pose.geometry_msgs::PoseWithCovariance_<std::allocator<void>>::pose.geometry_msgs::Pose_<std::allocator<void>>::position.geometry_msgs::Point_<std::allocator<void>>::x"}, {"variable": "pose::z", "new_value": "unknown.geometry_msgs::PoseWithCovarianceStamped_<std::allocator<void>>::pose.geometry_msgs::PoseWithCovariance_<std::allocator<void>>::pose.geometry_msgs::Pose_<std::allocator<void>>::position.geometry_msgs::Point_<std::allocator<void>>::z"}, {"variable": "pose::y", "new_value": "unknown.geometry_msgs::PoseWithCovarianceStamped_<std::allocator<void>>::pose.geometry_msgs::PoseWithCovariance_<std::allocator<void>>::pose.geometry_msgs::Pose_<std::allocator<void>>::position.geometry_msgs::Point_<std::allocator<void>>::y"}], "outputs": []}, {"type": "message", "condition": "(map_loaded == 1)", "callback": "initialpose_callback", "topic": "initialpose", "state_changes": [{"variable": "pose::z", "new_value": "nearest_z"}], "outputs": []}], "unclassified_publish": []}